<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Delta Bot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <!-- Navigation -->
    <nav class="navbar navbar-dark bg-primary">
        <div class="container">
            <a href="/dashboard" class="navbar-brand">
                <i class="fas fa-robot me-2"></i>Delta Bot Dashboard
            </a>
            <div class="d-flex align-items-center">
                <img th:if="${user.getAttribute('avatar')}" 
                     th:src="'https://cdn.discordapp.com/avatars/' + ${user.getAttribute('id')} + '/' + ${user.getAttribute('avatar')} + '.png'" 
                     width="32" height="32" class="rounded-circle me-2">
                <span th:text="${user.getAttribute('username')} + '#' + ${user.getAttribute('discriminator')}">User</span>
                <a href="/logout" class="btn btn-outline-light btn-sm ms-3">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h2>
                    <i class="fas fa-cogs text-warning me-2"></i>
                    Server Settings
                </h2>
                <p class="text-muted">Guild ID: <span th:text="${guildId}">Guild ID</span></p>
                <a href="/dashboard" class="btn btn-secondary mb-4">
                    <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                </a>
            </div>
        </div>

        <!-- Success/Error Messages -->
        <div th:if="${message}" class="row">
            <div class="col-12">
                <div th:class="'alert ' + (${success} ? 'alert-success' : 'alert-danger')">
                    <i th:class="'fas ' + (${success} ? 'fa-check-circle' : 'fa-exclamation-circle') + ' me-2'"></i>
                    <span th:text="${message}">Message</span>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Ticket System Settings -->
            <div class="col-md-6 mb-4">
                <div class="card bg-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-ticket-alt me-2"></i>Ticket System Settings
                        </h5>
                    </div>
                    <div class="card-body">
                        <form th:action="@{'/settings/' + ${guildId} + '/ticket'}" method="post">
                            <div class="mb-3">
                                <label for="categoryId" class="form-label">Category ID</label>
                                <input type="text" class="form-control" id="categoryId" name="categoryId" 
                                       th:value="${ticketCategory}" placeholder="Enter category ID">
                                <small class="form-text text-muted">Discord category where tickets will be created</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="channelId" class="form-label">Panel Channel ID</label>
                                <input type="text" class="form-control" id="channelId" name="channelId" 
                                       th:value="${ticketChannel}" placeholder="Enter channel ID">
                                <small class="form-text text-muted">Channel where ticket panel will be posted</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="roleId" class="form-label">Support Role ID (Optional)</label>
                                <input type="text" class="form-control" id="roleId" name="roleId" 
                                       placeholder="Enter role ID">
                                <small class="form-text text-muted">Role that will have access to tickets</small>
                            </div>
                            
                            <div class="mb-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="transcriptEnabled" 
                                           name="transcriptEnabled" value="true">
                                    <label class="form-check-label" for="transcriptEnabled">
                                        Enable Transcripts
                                    </label>
                                    <small class="form-text text-muted d-block">Save ticket conversations when closed</small>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Save Ticket Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Warning System Settings -->
            <div class="col-md-6 mb-4">
                <div class="card bg-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-exclamation-triangle me-2"></i>Warning System Settings
                        </h5>
                    </div>
                    <div class="card-body">
                        <form th:action="@{'/settings/' + ${guildId} + '/warn'}" method="post">
                            <div class="mb-3">
                                <label for="maxWarns" class="form-label">Maximum Warnings</label>
                                <input type="number" class="form-control" id="maxWarns" name="maxWarns" 
                                       value="3" min="1" max="10" required>
                                <small class="form-text text-muted">Number of warnings before punishment</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="minutesMuted" class="form-label">Mute Duration (Minutes)</label>
                                <input type="number" class="form-control" id="minutesMuted" name="minutesMuted" 
                                       value="60" min="1" max="10080" required>
                                <small class="form-text text-muted">How long to mute when max warnings reached</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="warnRoleId" class="form-label">Mute Role ID (Optional)</label>
                                <input type="text" class="form-control" id="warnRoleId" name="roleId" 
                                       placeholder="Enter role ID">
                                <small class="form-text text-muted">Role to assign when muting users</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="warnTimeHours" class="form-label">Warning Expiry (Hours)</label>
                                <input type="number" class="form-control" id="warnTimeHours" name="warnTimeHours" 
                                       value="168" min="1" max="8760" required>
                                <small class="form-text text-muted">Hours after which warnings expire (168 = 1 week)</small>
                            </div>
                            
                            <button type="submit" class="btn btn-warning">
                                <i class="fas fa-save me-2"></i>Save Warning Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>How to get Discord IDs:</strong>
                    Enable Developer Mode in Discord settings, then right-click on channels, roles, or categories and select "Copy ID"
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>